{"version":3,"file":"js/944.f88ab701.js","mappings":"qGAAA,QACEA,YACE,MAAMC,EAASC,aAAaC,QACzB,GAAEC,KAAKC,OAAOC,KAAKC,QAAQ,IAAK,cAG/BN,GACFO,OAAOC,SAAS,CAAEC,KAAMT,GAK5B,E,2JCXKU,MAAM,Q,UACTC,EAAAA,EAAAA,GAAmC,MAA/BD,MAAM,eAAc,UAAM,K,GACzBA,MAAM,W,GACJA,MAAM,YAAYE,IAAI,kB,iBAWhBF,MAAM,mB,GACJA,MAAM,e,GACNA,MAAM,gB,SAcGA,MAAM,W,UAC1BC,EAAAA,EAAAA,GAA6B,OAAxBD,MAAM,aAAW,W,UACtBC,EAAAA,EAAAA,GAA4C,OAAvCD,MAAM,iBAAgB,eAAW,K,GADtCG,EACAC,G,0CAhCNC,EAAAA,EAAAA,IAmCM,MAnCNC,EAmCM,CAlCJC,GACAN,EAAAA,EAAAA,GAgCM,MAhCNO,EAgCM,EA/BJP,EAAAA,EAAAA,GA0BM,MA1BNQ,EA0BM,gBAzBJJ,EAAAA,EAAAA,IAwBWK,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IAxBuBC,EAAAA,MAAI,CAApBC,EAAMC,M,WACtBR,EAAAA,EAAAA,IAsBM,O,IAvBsCQ,EACvCb,MAAM,aAAcc,QAAK,GAAEC,EAAAA,SAASH,I,EACvCX,EAAAA,EAAAA,GAOO,OANLD,MAAM,cACLgB,OAAK,S,wBAA8CD,EAAAA,YAAgCH,EAAKK,QAAQC,YAAYC,c,SAM/GlB,EAAAA,EAAAA,GAYM,MAZNmB,EAYM,EAXJnB,EAAAA,EAAAA,GAAsD,MAAtDoB,GAAsD,QAA1BT,EAAKK,QAAQK,MAAI,IAC7CrB,EAAAA,EAAAA,GAA+C,MAA/CsB,GAA+C,QAAlBX,EAAKY,MAAI,c,YAcnCb,EAAAA,YAAS,WAApBN,EAAAA,EAAAA,IAGM,MAHNoB,EAGM,uB,eAyKZ,GACEC,OACE,MAAO,CACLC,WAAW,EACXC,KAAM,GACNC,KAAM,EAkBV,EACAC,OAAQ,CAACC,EAAAA,GACTC,MAAO,CAAC,EACRC,QAAS,CACPC,SAAStB,GACPnB,KAAK0C,YAAYvB,EACnB,EACAwB,gBACE,IAAK3C,KAAK4C,KAAM,OAAO,EAErBxC,OAAOyC,SACPC,SAASC,KAAKC,aAAe5C,OAAO6C,YAAc,MAElDjD,KAAKoC,MAAQ,EACbpC,KAAKkD,KAAKlD,KAAKoC,MACfpC,KAAK4C,MAAO,EAEhB,EACAF,YAAYvB,GACVgC,MACG,8EAA6EhC,EAAKK,QAAQ4B,0BAC3F,CAAC,GAEAC,MAAMC,GACEA,EAASC,SAEjBF,MAAMG,IACL,MAAMC,EAAW,CACfC,IAAKF,EAAIhC,QAAQC,YAAYC,MAAM,GAAGgC,IACtCC,YAAaH,EAAIhC,QAAQmC,YACzBC,QAASJ,EAAIhC,QAAQqC,SAASnC,MAAM,GAAGgC,IACvCI,OAAQN,EAAIhC,QAAQuC,gBACpBC,SAAUR,EAAIhC,QAAQ4B,MACtBa,KAAMT,EAAIhC,QAAQyC,KAClBC,KAAM,IAAIC,KAAKX,EAAIhC,QAAQ4C,kBAAkBC,eAC3C,CAAC,EACD,CAAEH,KAAM,aAGZlE,KAAKsE,MAAM,cAAeb,EAAS,GAEzC,EACAP,KAAKd,EAAMmC,GACTvE,KAAKkC,WAAY,EACjBiB,MACE,iIACEf,EACA,+BAEDiB,MAAMC,GAAaA,EAASC,SAC5BF,MAAMG,IACDxD,KAAKwE,SAAShB,EAAIhC,QAAQiD,gBAAgB/C,SACxC6C,GACFG,YAAW,KAEP1E,KAAK2E,MAAMC,eAAeC,wBAAwBC,OAClD1E,OAAO6C,cAEPjD,KAAKoC,MAAQ,GACbpC,KAAKkD,KAAKlD,KAAKoC,KAAMmC,GACvB,IAIa,GAAbvE,KAAKoC,KACPpC,KAAKmC,KAAOqB,EAAIhC,QAAQiD,gBAAgB/C,MAExC1B,KAAKmC,KAAOnC,KAAKmC,KAAK4C,OAAOvB,EAAIhC,QAAQiD,gBAAgB/C,OAE3D1B,KAAK4C,MAAO,GAGd5C,KAAKkC,WAAY,CAAI,IAEtB8C,OAAOC,GAAQC,QAAQC,IAAIF,IAChC,EACAT,SAASY,GACP,SAAOA,IAAOA,EAAIC,OACpB,EACAC,YAAYF,GACV,OAAOA,EAAI,IAAMA,EAAI,GAAG1B,GAC1B,GAEF6B,UACEvF,KAAKkD,KAAKlD,KAAKoC,MAAM,EACvB,EACAxC,YACEI,KAAK2C,cAAgB3C,KAAK2C,cAAc6C,KAAKxF,MAC7CI,OAAOqF,iBAAiB,SAAUzF,KAAK2C,cACzC,EACA+C,cACEtF,OAAOuF,oBAAoB,SAAU3F,KAAK2C,cAC5C,EACAiD,iBAAiBC,GAAI,KAAEhE,GAAQiE,GAC7BhG,aAAaiG,QAAS,GAAElE,WAAezB,OAAOyC,SAC9CiD,GACF,G,QC3TF,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://port/./src/mixins/saveScroll.js","webpack://port/./src/elements/pages/page-films.vue","webpack://port/./src/elements/pages/page-films.vue?5059"],"sourcesContent":["export default {\r\n  activated() {\r\n    const scroll = localStorage.getItem(\r\n      `${this.$route.path.replace('/', '')}_scroll`\r\n    )\r\n\r\n    if (scroll) {\r\n      window.scrollTo({ top: +scroll })\r\n      // setTimeout(() => {\r\n      //   window.scrollTo({ top: +scroll })\r\n      // })\r\n    }\r\n  }\r\n  // НЕ РАБОТАЕТ В VUE 3\r\n  // beforeRouteLeave(to, { name }, next) {\r\n  //   console.log(name)\r\n  //   localStorage.setItem(`${name}_scroll`, window.scrollY)\r\n  //   next()\r\n  // }\r\n}\r\n","<template>\r\n  <div class=\"main\">\r\n    <h2 class=\"page__title\">Фильмы</h2>\r\n    <div class=\"wrapper\">\r\n      <div class=\"container\" ref=\"filmsContainer\">\r\n        <template v-for=\"(item, index) in list\" :key=\"index\">\r\n          <div class=\"list__item\" @click=\"showInfo(item)\">\r\n            <div\r\n              class=\"item__image\"\r\n              :style=\"{\r\n                backgroundImage: `url('${getImageUrl(\r\n                  item.element.basicCovers.items\r\n                )}')`\r\n              }\"\r\n            ></div>\r\n            <div class=\"text__container\">\r\n              <div class=\"title__text\">{{ item.element.name }}</div>\r\n              <div class=\"public__date\">{{ item.Year }}</div>\r\n              <!-- <div class=\"rating__wrapper\">\r\n\t\t\t\t\t\t\t\t<div class=\"year\">{{ item.element.worldReleaseDate ? new Date(item.element.worldReleaseDate).toLocaleString([], {year: 'numeric'}) : '' }}</div>\r\n\t\t\t\t\t\t\t\t<div class=\"rate__wrapper\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"rating\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"colored__rating\"  :style=\"{ backgroundImage: 'url(src/img/' + getRateColor(item.element.kinopoiskRating) + ')', width: getRateWidth(item.element.kinopoiskRating) + '%' }\"></div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"value\">{{ getRate(item.element.kinopoiskRating) }}</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div> -->\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </div>\r\n      <div v-if=\"preloader\" class=\"loading\">\r\n        <div class=\"preloader\"></div>\r\n        <div class=\"loading__text\">Загрузка...</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.page__title {\r\n  font-size: 40px;\r\n  margin-bottom: 40px;\r\n}\r\n\r\n.wrapper {\r\n  position: relative;\r\n}\r\n\r\n.loading {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  z-index: 1;\r\n}\r\n\r\n.loading__text {\r\n  margin: 5px 0 0 10px;\r\n  color: #0863ef;\r\n  font-size: 15px;\r\n  font-weight: bold;\r\n}\r\n\r\n.preloader {\r\n  margin: 0 auto;\r\n  width: 30px;\r\n  height: 30px;\r\n  border: 4px solid #0863ef;\r\n  border-radius: 50%;\r\n  border-right-color: transparent;\r\n  box-sizing: border-box;\r\n  animation: rotatePreloader 0.5s linear infinite;\r\n}\r\n\r\n@keyframes rotatePreloader {\r\n  100% {\r\n    transform: rotateZ(360deg);\r\n  }\r\n}\r\n\r\n.filters {\r\n  position: absolute;\r\n  width: 140px;\r\n  height: 100%;\r\n  border-radius: 7px;\r\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.6) inset;\r\n  background: #fff;\r\n  padding: 13px;\r\n  left: 290px;\r\n  box-sizing: border-box;\r\n  top: 0;\r\n}\r\n\r\n.label {\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);\r\n  margin-bottom: 10px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.container {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));\r\n  grid-auto-rows: 250px;\r\n  grid-gap: 10px;\r\n  padding-bottom: 5px;\r\n  scroll-behavior: smooth;\r\n  max-width: 1300px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.list__item {\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n  border-radius: 10px;\r\n  box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.item__image {\r\n  flex-grow: 1;\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: center;\r\n  background-color: #ccc;\r\n}\r\n\r\n.text__container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #fff;\r\n  flex-grow: 0.1;\r\n  padding: 10px;\r\n  color: #333;\r\n  box-shadow: 0px -3px 10px rgba(0, 0, 0, 0.8);\r\n}\r\n\r\n.title__text {\r\n  font-size: 16px;\r\n  letter-spacing: 0.4px;\r\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);\r\n}\r\n\r\n.public__date {\r\n  margin-top: auto;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  font-size: 15px;\r\n  color: #333;\r\n  text-shadow: -2px 3px 5px rgba(0, 0, 0, 0.4);\r\n}\r\n\r\n/* .rating__wrapper {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.year {\r\n\t\tfont-size: 15px;\r\n\t\tcolor: #9c9c9c;\r\n\t}\r\n\r\n\t.rate__wrapper {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.rating {\r\n\t\tposition: relative;\r\n\t\twidth: 70px;\r\n\t\theight: 13px;\r\n\t\tbackground: url('../../img/grey_star.svg') repeat-x center;\r\n\t\tbackground-size: contain;\r\n\t}\r\n\r\n\t.colored__rating {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\theight: 100%;\r\n\t\tbackground-size: contain;\r\n\t}\r\n\r\n\t.value {\r\n\t\tcolor: #333;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-left: 10px;\r\n\t\tfont-size: 16px;\r\n\t} */\r\n\r\n.active {\r\n  color: #07f;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport saveScroll from '@/mixins/saveScroll'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      preloader: false,\r\n      list: [],\r\n      page: 0\r\n      // getRate(rate) {\r\n      // \treturn rate ? rate.toFixed(1) : ''\r\n      // },\r\n      // getRateColor(rate) {\r\n      // \tif(!rate) return\r\n      // \tif(rate <= 4) {\r\n      // \t\treturn 'red_star.svg'\r\n      // \t}else if(rate > 4 && rate <= 7) {\r\n      // \t\treturn 'yellow_star.svg'\r\n      // \t}else {\r\n      // \t\treturn 'green_star.svg'\r\n      // \t}\r\n      // },\r\n      // getRateWidth(rate) {\r\n      // \treturn 100 / 10 * rate\r\n      // },\r\n    }\r\n  },\r\n  mixins: [saveScroll],\r\n  watch: {},\r\n  methods: {\r\n    showInfo(item) {\r\n      this.getItemInfo(item)\r\n    },\r\n    scrollContent() {\r\n      if (!this.flag) return false\r\n      if (\r\n        window.scrollY >=\r\n        document.body.scrollHeight - window.innerHeight - 200\r\n      ) {\r\n        this.page += 8\r\n        this.load(this.page)\r\n        this.flag = false\r\n      }\r\n    },\r\n    getItemInfo(item) {\r\n      fetch(\r\n        `https://ctx.playfamily.ru/screenapi/v1/noauth/moviecard/web/1?elementAlias=${item.element.alias}&elementType=MOVIE`,\r\n        {}\r\n      )\r\n        .then((response) => {\r\n          return response.json()\r\n        })\r\n        .then((res) => {\r\n          const filmData = {\r\n            url: res.element.basicCovers.items[0].url,\r\n            description: res.element.description,\r\n            trailer: res.element.trailers.items[1].url,\r\n            rating: res.element.kinopoiskRating,\r\n            filmName: res.element.alias,\r\n            type: res.element.type,\r\n            year: new Date(res.element.worldReleaseDate).toLocaleString(\r\n              {},\r\n              { year: 'numeric' }\r\n            )\r\n          }\r\n          this.$emit('onFilmClick', filmData)\r\n        })\r\n    },\r\n    load(page, first_load) {\r\n      this.preloader = true\r\n      fetch(\r\n        'https://ctx.playfamily.ru/screenapi/v1/noauth/collection/web/1?elementAlias=novelty_web&elementType=COLLECTION&limit=8&offset=' +\r\n          page +\r\n          '&withInnerCollections=false'\r\n      )\r\n        .then((response) => response.json())\r\n        .then((res) => {\r\n          if (this.hasItems(res.element.collectionItems.items)) {\r\n            if (first_load) {\r\n              setTimeout(() => {\r\n                if (\r\n                  this.$refs.filmsContainer.getBoundingClientRect().bottom <\r\n                  window.innerHeight\r\n                ) {\r\n                  this.page += 20\r\n                  this.load(this.page, first_load)\r\n                }\r\n              })\r\n            }\r\n\r\n            if (this.page == 0) {\r\n              this.list = res.element.collectionItems.items\r\n            } else {\r\n              this.list = this.list.concat(res.element.collectionItems.items)\r\n            }\r\n            this.flag = true\r\n          }\r\n\r\n          this.preloader = false\r\n        })\r\n        .catch((err) => console.log(err))\r\n    },\r\n    hasItems(arr) {\r\n      return arr && arr.length ? true : false\r\n    },\r\n    getImageUrl(arr) {\r\n      return arr[0] && arr[0].url\r\n    }\r\n  },\r\n  created() {\r\n    this.load(this.page, true)\r\n  },\r\n  activated() {\r\n    this.scrollContent = this.scrollContent.bind(this)\r\n    window.addEventListener('scroll', this.scrollContent)\r\n  },\r\n  deactivated() {\r\n    window.removeEventListener('scroll', this.scrollContent)\r\n  },\r\n  beforeRouteLeave(to, { name }, next) {\r\n    localStorage.setItem(`${name}_scroll`, window.scrollY)\r\n    next()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./page-films.vue?vue&type=template&id=3683ece8&scoped=true\"\nimport script from \"./page-films.vue?vue&type=script&lang=js\"\nexport * from \"./page-films.vue?vue&type=script&lang=js\"\n\nimport \"./page-films.vue?vue&type=style&index=0&id=3683ece8&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\MIBELN\\\\webdev\\\\port\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3683ece8\"]])\n\nexport default __exports__"],"names":["activated","scroll","localStorage","getItem","this","$route","path","replace","window","scrollTo","top","class","_createElementVNode","ref","_hoisted_10","_hoisted_11","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","$data","item","index","onClick","$options","style","element","basicCovers","items","_hoisted_6","_hoisted_7","name","_hoisted_8","Year","_hoisted_9","data","preloader","list","page","mixins","saveScroll","watch","methods","showInfo","getItemInfo","scrollContent","flag","scrollY","document","body","scrollHeight","innerHeight","load","fetch","alias","then","response","json","res","filmData","url","description","trailer","trailers","rating","kinopoiskRating","filmName","type","year","Date","worldReleaseDate","toLocaleString","$emit","first_load","hasItems","collectionItems","setTimeout","$refs","filmsContainer","getBoundingClientRect","bottom","concat","catch","err","console","log","arr","length","getImageUrl","created","bind","addEventListener","deactivated","removeEventListener","beforeRouteLeave","to","next","setItem","__exports__","render"],"sourceRoot":""}