"use strict";(self["webpackChunkport"]=self["webpackChunkport"]||[]).push([[696],{9511:function(e,l){l["Z"]={activated(){const e=localStorage.getItem(`${this.$route.path.replace("/","")}_scroll`);e&&window.scrollTo({top:+e})}}},5696:function(e,l,t){t.r(l),t.d(l,{default:function(){return _}});var a=t(3396),r=t(7139);const i=e=>((0,a.dD)("data-v-57ef40eb"),e=e(),(0,a.Cn)(),e),s={class:"main"},o=i((()=>(0,a._)("h2",{class:"page__title"},"Галерея",-1))),n={class:"content",ref:"galleryContainer"},c=i((()=>(0,a._)("div",{class:"wrapper__row"},null,-1))),g={class:"container",ref:"container"},h=["onClick"],d={key:0,class:"preloader"},u={key:1,class:"no__items"};function p(e,l,t,i,p,w){return(0,a.wg)(),(0,a.iD)("div",s,[o,(0,a._)("div",n,[c,(0,a._)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p.gallery,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"card__container",key:l},[(0,a._)("div",{class:"image__item",style:(0,r.j5)({background:`url('${e.urls.small}') no-repeat center`,backgroundSize:"cover"}),ref_for:!0,ref:"galleryItem",onClick:l=>w.imgClick(e)},null,12,h)])))),128)),p.gallery.length||0==p.count?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",d)),0==p.count?((0,a.wg)(),(0,a.iD)("div",u,"Ничего не найдено")):(0,a.kq)("",!0)],512)],512)])}var w=t(9511),y={data(){return{gallery:[],page:1,flag:!0,search:"wallpapers",searchTimeout:null,count:""}},mixins:[w.Z],methods:{imgClick(e){this.$emit("onImageClick",e.urls.regular)},async loadGallery(e,l){try{l=l||"wallpapers";const t="Vtl0Ncn4yxIMTyFHvk_7xvUvGXolFMPRxbB-q86AhW0",a=`https://api.unsplash.com/search/photos?page=${e}&per_page=20&query=office&client_id=${t}&query=${l}`,r=await fetch(a),i=await r.json();1===e?(this.gallery=i.results,setTimeout((()=>{const e=this.$refs.galleryContainer.getBoundingClientRect().bottom;e<window.innerHeight&&(this.page++,this.loadGallery(this.page,this.search))}))):this.gallery=this.gallery.concat(i.results),this.count=i.total,this.flag=!0}catch(t){console.log(t)}},gallertScroll(){if(!this.flag)return!1;this.gallery.length<this.count&&window.scrollY+200>document.body.scrollHeight-window.innerHeight&&(this.page++,this.loadGallery(this.page,this.search),this.flag=!1)}},created(){this.loadGallery(this.page,this.search)},activated(){this.gallertScroll=this.gallertScroll.bind(this),window.addEventListener("scroll",this.gallertScroll)},deactivated(){window.removeEventListener("scroll",this.gallertScroll)},beforeRouteLeave(e,{name:l},t){localStorage.setItem(`${l}_scroll`,window.scrollY),t()}},f=t(89);const v=(0,f.Z)(y,[["render",p],["__scopeId","data-v-57ef40eb"]]);var _=v}}]);
//# sourceMappingURL=696.99bcb62b.js.map